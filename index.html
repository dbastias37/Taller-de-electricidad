<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gu√≠a Docente ¬∑ Taller de Electricidad STEAM</title>
  <style>
    :root{
      --bg: #f8fafc;               /* fondo general */
      --panel: #ffffff;             /* paneles/cards */
      --text: #1f2937;              /* texto base */
      --muted: #475569;             /* texto secundario */
      --brand: #7c83fd;             /* acento suave */
      --brand-2: #a3d9ff;           /* acento pastel */
      --pastel-1:#eaf4ff;           /* azul pastel */
      --pastel-2:#e8fff2;           /* menta pastel */
      --pastel-3:#fff3e8;           /* durazno pastel */
      --pastel-4:#f3e8ff;           /* lila pastel */
      --ring: rgba(124,131,253,.25);
      --radius: 16px;
      --shadow: 0 10px 25px rgba(17,24,39,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: linear-gradient(180deg, var(--pastel-1), var(--bg));
      color:var(--text);
    }
    header{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.65));
      border-bottom:1px solid rgba(30,41,59,.06);
    }
    .wrap{max-width:1280px; margin:0 auto; padding:20px 16px}
    .title{display:flex; align-items:center; gap:12px; flex-wrap:wrap}
    .logo{width:44px; height:44px; border-radius:12px; background:linear-gradient(135deg, var(--brand), var(--pastel-4)); box-shadow: var(--shadow); display:grid; place-items:center; color:white; font-weight:700}
    h1{font-size: clamp(20px, 3vw, 28px); margin:0}
    .sub{color:var(--muted); font-size:14px}

    /* Men√∫ de clases */
    .grid{display:grid; gap:14px; margin:20px 0 40px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr))}
    .card{background:var(--panel); border-radius: var(--radius); padding:16px 16px 18px; box-shadow: var(--shadow); border:1px solid rgba(30,41,59,.05); transition: transform .15s ease, box-shadow .15s ease}
    .card:hover{ transform: translateY(-2px); box-shadow: 0 16px 36px rgba(17,24,39,.10) }
    .badge{display:inline-flex; align-items:center; gap:6px; font-size:12px; color:#0f172a; background:var(--pastel-2); padding:4px 8px; border-radius:999px; border:1px solid rgba(30,41,59,.08)}
    .card h3{margin:10px 0 6px; font-size:18px}
    .card p{margin:0; color:var(--muted); font-size:14px; min-height:40px}
    .card button{ margin-top:12px; width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(30,41,59,.08); background: linear-gradient(180deg, #ffffff, var(--pastel-3)); cursor:pointer; font-weight:600; box-shadow: 0 4px 10px rgba(17,24,39,.06) }
    .card button:focus{ outline: 3px solid var(--ring) }

    /* Modal / Panel */
    .overlay{ position:fixed; inset:0; background:rgba(15,23,42,.30); display:none; z-index:50 }
    .panel{ position:fixed; top:0; right:0; bottom:0; left:auto; width: clamp(340px, 80vw, 980px); height:100%; background:var(--panel); border-top-left-radius:20px; box-shadow:-6px 0 32px rgba(17,24,39,.15); transform: translateX(100%); transition: transform .25s ease; display:flex; flex-direction:column }
    .panel.open{ transform:none }
    .overlay.show{ display:block }
    .panel-header{ padding:16px; border-bottom:1px solid rgba(30,41,59,.06); display:flex; align-items:center; justify-content:space-between; gap:10px; background:linear-gradient(180deg, var(--pastel-4), #fff) }
    .panel-title{ margin:0; font-size:20px }
    .panel-actions{ display:flex; gap:8px }
    .btn{ border:1px solid rgba(30,41,59,.10); background:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:600 }
    .btn.secondary{ background:var(--pastel-1) }
    .btn.primary{ background:var(--brand-2) }
    .btn:focus{ outline: 3px solid var(--ring) }

    .tabs{ display:flex; gap:8px; padding:12px 16px; border-bottom:1px solid rgba(30,41,59,.06); flex-wrap:nowrap; overflow-x:auto }
    .tab-btn{ padding:8px 10px; border-radius:999px; border:1px solid rgba(30,41,59,.08); background:#fff; font-weight:600; font-size:13px; cursor:pointer }
    .tab-btn.active{ background:var(--pastel-2); border-color: rgba(30,41,59,.15) }

    .panel-body{ padding:12px 16px 96px; overflow:auto; max-width:900px; margin:0 auto }
    section{ background: linear-gradient(180deg, #fff, var(--pastel-1)); border:1px solid rgba(30,41,59,.06); border-radius:16px; padding:16px; margin:12px 0; box-shadow: var(--shadow) }
    section h4{ margin:0 0 10px; font-size:16px }
    ul{ margin:8px 0 0 18px }
    li{ margin:6px 0 }
    .kpi{ display:grid; grid-template-columns:repeat(auto-fit, minmax(180px,1fr)); gap:8px; margin-top:8px }
    .pill{ background:var(--pastel-3); padding:8px 10px; border-radius:999px; border:1px solid rgba(30,41,59,.08); font-size:12px; color:#334155 }
    .foot{ text-align:center; padding:20px 0 40px; color:var(--muted); font-size:12px }
    .tip{ font-size:13px; color:var(--muted) }

    @media (max-width:720px){ .panel{ width:100%; left:0; border-top-left-radius:16px; border-top-right-radius:16px } }
    body.modal-open{ overflow:hidden; }
    @media print{ header, main, .overlay{ display:none !important; } .panel{ position:static; transform:none; box-shadow:none; width:auto; height:auto; } body{ background:#fff !important; } section{ break-inside: avoid; page-break-inside: avoid; } }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="title">
        <div class="logo" aria-hidden="true">‚ö°</div>
        <div>
          <h1>Gu√≠a Docente ¬∑ Taller de Electricidad STEAM</h1>
          <div class="sub">10 sesiones ¬∑ 45 minutos ¬∑ Edades 6‚Äì14 ¬∑ Enfoque STEAM (Science, Technology, Engineering, Arts, Math)</div>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section style="background:linear-gradient(180deg, #fff, var(--pastel-2)); border:1px solid rgba(30,41,59,.06); border-radius:16px; padding:16px; box-shadow: var(--shadow)">
      <h2 style="margin:6px 0 4px;font-size:20px">Men√∫ de clases</h2>
      <p style="margin:0;color:var(--muted)">Haz clic en una clase para abrir su gu√≠a con pesta√±as. Cada pesta√±a est√° enriquecida con <strong>objetivos desglosados, pasos detallados, errores comunes, seguridad, diferenciaci√≥n por edades, vocabulario clave</strong> y <strong>extensiones</strong>. Dise√±o pastel y sin distracciones.</p>
    </section>

    <div id="cards" class="grid" aria-live="polite"></div>

    <div class="foot">Versi√≥n est√°tica. Usa ‚ÄúImprimir‚Äù dentro del panel para exportar PDF. ‚Äì Academia WIW</div>
  </main>

  <!-- Overlay & Panel -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>
  <aside class="panel" id="panel" role="dialog" aria-modal="true" aria-labelledby="panelTitle">
    <div class="panel-header">
      <h3 class="panel-title" id="panelTitle">Clase</h3>
      <div class="panel-actions">
        <button class="btn secondary" id="printBtn" title="Imprimir/Exportar">üñ®Ô∏è Imprimir</button>
        <button class="btn" id="closeBtn" title="Salir">‚üµ Salir</button>
      </div>
    </div>
    <nav class="tabs" id="tabs" aria-label="Pesta√±as de contenido"></nav>
    <div class="panel-body" id="tabContent"></div>
  </aside>

  <script>
    // =============================
    // ESTRUCTURA DE SESIONES (enriquecida)
    // =============================

    const sesiones = [
      // =============== S1 ===============
      {
        id:1,
        titulo:"Mi primera luz el√©ctrica",
        subtitulo:"Fundamentos: bater√≠a, polaridad y LED",
        badge:"S1 ‚Ä¢ Fundamentos",
        iniciativa:"¬°Bienvenidos peque√±os inventores! Hoy descubriremos c√≥mo una fuente (bater√≠a) y un LED pueden crear luz de forma segura.",
        objetivo:[
          "Identificar la pila como fuente de energ√≠a de CC y reconocer sus polos (+/‚àí).",
          "Explicar la polaridad del LED (√°nodo/c√°todo) y su relaci√≥n con el encendido.",
          "Armar un circuito simple (pila‚ÄìLED) y verificar continuidad visual (luz estable).",
          "Registrar observaciones (encendido, inversi√≥n de polaridad) en el Cuaderno del Inventor.",
          "Introducir criterios de seguridad: no cortocircuitar, no forzar patas del LED, manipulaci√≥n responsable."
        ],
        materiales:[
          "‚Ä¢ Por estudiante: LED difuso blanco (x2), pila bot√≥n 3V CR2032 (x1) con portapilas, cinta aislante, cartulina A5 para linterna, stickers.",
          "‚Ä¢ Docente: LEDs extra de colores, tijeras de seguridad, marcadores, cinta de enmascarar para se√±alizar mesas.",
          "‚Ä¢ Organizaci√≥n: canasto por mesa con kits numerados; caja de descarte para pilas agotadas; pa√±os para limpieza.",
          "‚Ä¢ Opcional: plantillas impresas de linternas de papel, etiquetas '√°nodo/c√°todo'."
        ],
        paso:[
          {titulo:"Activaci√≥n (5')", items:[
            "Mostrar pila y LED apagado; recoger predicciones r√°pidas (mano alzada).",
            "Analog√≠a: r√≠o que fluye ‚Üí la corriente el√©ctrica necesita direcci√≥n y camino completo."
          ]},
          {titulo:"Desaf√≠o (5')", items:[
            "Meta visible: 'Encender LED de forma estable y explicar por qu√©'.",
            "Criterios: LED enciende; reproducible 2√ó; explica polaridad con dibujo."
          ]},
          {titulo:"Construcci√≥n y pruebas (25')", items:[
            "Exploraci√≥n (7'): probar LED en ambas orientaciones; registrar cu√°l enciende.",
            "Demostraci√≥n (5'): pata larga (√°nodo, +) y parte plana (c√°todo, ‚àí).",
            "Construcci√≥n (8'): linterna de papel; fijar LED con cinta sin pellizcar patas.",
            "Pruebas (5'): si parpadea, revisar presi√≥n/posici√≥n de contactos."
          ]},
          {titulo:"Medici√≥n y datos (5')", items:[
            "Checklist: ¬øencendido estable? ¬øqu√© pas√≥ al invertir polaridad?",
            "Evidencia: foto del producto terminado (si posible)."
          ]},
          {titulo:"Cierre (5')", items:[
            "Exposici√≥n rel√°mpago: 30 s; 1 dificultad + 1 hallazgo.",
            "Vincular con la vida cotidiana: ¬ød√≥nde vemos LEDs?"
          ]}
        ],
        preguntas:[
          "¬øQu√© pasa si conecto el LED al rev√©s? ¬øpor qu√©?",
          "¬øC√≥mo reconozco el lado positivo de la pila y del LED?",
          "¬øQu√© significa 'circuito completo'?",
          "¬øPor qu√© el LED apenas se calienta frente a otras ampolletas?",
          "Si no enciende, ¬øqu√© compruebas primero? (diagn√≥stico)"
        ],
        respuestas:[
          "El LED es un diodo: solo conduce en un sentido (√°nodo a +, c√°todo a ‚àí).",
          "Circuito completo = camino cerrado desde + de la pila ‚Üí LED ‚Üí ‚àí de la pila.",
          "LEDs son eficientes (m√°s luz con menos energ√≠a) y dirigen la corriente en un sentido.",
          "La pata larga indica √°nodo; en algunos LEDs la carcasa plana marca el c√°todo.",
          "Diagn√≥stico: revisar polaridad, presi√≥n de contacto, y que las patas no se toquen."
        ],
        incentivar:[
          "'Momento m√°gico': apagar luces 10 s y encender todas las linternas.",
          "Sello 'Ingeniero Junior' a quien haga un diagrama simple.",
          "Galer√≠a de linternas: foto grupal para familias.",
          "Personalizaci√≥n libre para sentido de pertenencia."
        ],
        exposicion:[
          "Mostrar linterna encendida y orientaci√≥n correcta del LED.",
          "Un problema y c√≥mo lo resolvi√≥ (p. ej., patas en corto).",
          "Un uso en casa (p. ej., lectura nocturna)."
        ],
        felicitacion:"¬°Incre√≠ble! Dominaron el secreto de la polaridad. Piocha del Primer Circuito ‚ö°.",
        foco:[
          "Polaridad y direcci√≥n de corriente (diodo).",
          "Contacto firme sin doblar en exceso las patas.",
          "Seguridad con pilas bot√≥n (no llevar a la boca, no perforar).",
          "Diagrama m√≠nimo con s√≠mbolos +/‚àí."
        ],
        apoyos:[
          "Tarjetas '√°nodo/c√°todo' por mesa.",
          "Conectores grandes para motricidad fina.",
          "Parejas tutor‚Äìaprendiz (13‚Äì14 ayudan a 6‚Äì8).",
          "Estaci√≥n tranquila para reexplicar."
        ],
        evaluacion:[
          "Lista de cotejo: conecta, explica polaridad, registra un dato.",
          "R√∫brica (1‚Äì4): comprensi√≥n, armado, comunicaci√≥n.",
          "Evidencia: foto + nota con dibujo del circuito."
        ],
        seguridad:[
          "Pilas bot√≥n en contenedor seguro al finalizar.",
          "No forzar patas del LED.",
          "Evitar cortocircuitos (patas toc√°ndose en la pila).",
          "Lavado de manos tras usar adhesivos."
        ],
        errores:[
          "LED invertido ‚Üí no enciende (invertir).",
          "Patas en corto ‚Üí separar/aislar.",
          "Contacto flojo ‚Üí parpadeo (reforzar).",
          "Confusi√≥n de +/‚àí ‚Üí marcar el + con plum√≥n."
        ],
        vocabulario:[
          "Fuente (bater√≠a)", "Polaridad", "LED", "Circuito", "√Ånodo/C√°todo"
        ],
        diferenciacion:[
          "6‚Äì8: plantillas pre-dobladas y c√≥digo de color.",
          "9‚Äì12: s√≠mbolo del diodo en el esquema.",
          "13‚Äì14: noci√≥n de corriente vs voltaje y resistencias (solo idea)."
        ],
        extensiones:[
          "Hogar: inventario de LEDs indicadores.",
          "Arte: sombras con linterna de papel.",
          "Tecnolog√≠a: por qu√© usar resistencia con fuentes mayores.",
          "Reciclaje responsable de bater√≠as."
        ],
        logistica:[
          "Kits en bolsas zip; portapilas marcado con +.",
          "Mesas en isla; estaci√≥n de soporte con cinta y tijeras.",
          "Cron√≥metro visible por fases; m√∫sica suave.",
          "Recolectar pilas sueltas al cierre."
        ],
        mensaje:"La electricidad puede controlarse de forma segura y creativa.",
        ceremonia:"Piocha del Primer Circuito ‚ö°"
      },

      // =============== S2 ===============
      {
        id:2,
        titulo:"Detectives de conductividad",
        subtitulo:"Materiales conductores y aislantes",
        badge:"S2 ‚Ä¢ Materiales",
        iniciativa:"Investigamos qu√© materiales dejan pasar la electricidad y cu√°les la bloquean, y por qu√© eso nos mantiene seguros.",
        objetivo:[
          "Construir un probador simple (fuente‚ÄìLED‚Äìcables).",
          "Clasificar ‚â•8 materiales con evidencia.",
          "Relacionar conductor/aislante con usos cotidianos.",
          "Registrar tabla de resultados y conclusi√≥n.",
          "Explicar a nivel cualitativo: metales (electrones libres) vs pol√≠meros."
        ],
        materiales:[
          "Kit LED + bater√≠a y caimanes.",
          "Muestras: moneda, clip, aluminio, madera, cart√≥n, pl√°stico, goma, grafito, agua con sal (docente).",
          "Goma EVA y ojos m√≥viles (monstruo conductor).",
          "Tabla de registro y plumones."
        ],
        paso:[
          {titulo:"Activaci√≥n (5')", items:["Moneda vs papel; hip√≥tesis y por qu√©."]},
          {titulo:"Desaf√≠o (5')", items:["Clasificar 8+ materiales y crear un monstruo que use un conductor para encender LED."]},
          {titulo:"Experimentaci√≥n (15')", items:["Probar con probador y registrar (enciende/no enciende)."]},
          {titulo:"Construcci√≥n (10')", items:["Integrar conductor elegido en el monstruo."]},
          {titulo:"Medici√≥n (5')", items:["Completar tabla y marcar sorpresas."]},
          {titulo:"Cierre (5')", items:["Patr√≥n: metales conducen; pl√°sticos/maderas a√≠slan."]}
        ],
        preguntas:[
          "¬øQu√© propiedad de los metales permite la conducci√≥n?",
          "¬øPor qu√© los cables tienen cubierta pl√°stica?",
          "¬øAgua pura vs agua con sal?",
          "¬øQu√© material te sorprendi√≥ y por qu√©?",
          "¬øQu√© riesgos evitamos con aislantes?"
        ],
        respuestas:[
          "Metales: electrones libres ‚Üí movimiento de carga.",
          "Cubierta pl√°stica: seguridad; evita contacto con el metal.",
          "Sales aportan iones ‚Üí aumenta conducci√≥n (solo en estaci√≥n docente).",
          "Aislantes evitan descargas: ¬°protecci√≥n!"
        ],
        incentivar:[
          "Reto material comod√≠n (grafito).",
          "Pizarra de hallazgos: 1 descubrimiento por equipo.",
          "Monstruo con nombre cient√≠fico-divertido."
        ],
        exposicion:[
          "Mostrar monstruo y qu√© parte es conductora.",
          "Un material que no funcion√≥ y por qu√©.",
          "Comparar tabla con otro equipo."
        ],
        felicitacion:"¬°Excelente trabajo, detectives! Piocha del Detective de Materiales üîç.",
        foco:[
          "Enchufe: pl√°stico afuera, metal adentro.",
          "Nunca tocar metal expuesto.",
          "Ciclo cient√≠fico: hip√≥tesis ‚Üí prueba ‚Üí registro ‚Üí conclusi√≥n."
        ],
        apoyos:[
          "Materiales preclasificados por color.",
          "Pictogramas para tabla.",
          "Caimanes grandes para agarre f√°cil.",
          "Demostraci√≥n controlada con agua salada."
        ],
        evaluacion:[
          "Registra 8 materiales correctamente.",
          "Explica por qu√© un aislante es seguro.",
          "Evidencia del monstruo conductor."
        ],
        seguridad:[
          "Nada de l√≠quidos sin supervisi√≥n.",
          "No pelar cables; revisar pinzas.",
          "Higiene post actividad."
        ],
        errores:[
          "Contacto flojo ‚Üí falso negativo.",
          "'No enciende' ‚â† malo: puede ser aislante √∫til.",
          "Manos h√∫medas alteran pruebas ‚Üí secar."
        ],
        vocabulario:["Conductor", "Aislante", "Continuidad", "Seguridad el√©ctrica"],
        diferenciacion:[
          "6‚Äì8: tabla con emojis (üí°/üö´).",
          "9‚Äì12: categor√≠a 'semi-conductivo' (grafito).",
          "13‚Äì14: noci√≥n de resistividad y casos industriales."
        ],
        extensiones:[
          "Hogar: inventario metal vs pl√°stico.",
          "Arte: circuito oculto en el monstruo.",
          "Ciencias: l√°piz blando vs duro."
        ],
        logistica:[
          "Estaciones con 8‚Äì10 materiales y rotaci√≥n.",
          "Zonas sin l√≠quidos se√±alizadas.",
          "Contenedor de piezas peque√±as al final."
        ],
        mensaje:"La seguridad el√©ctrica depende de elegir bien los materiales.",
        ceremonia:"Piocha del Detective de Materiales üîç"
      },

      // =============== S3 ===============
      {
        id:3,
        titulo:"Controladores de corriente",
        subtitulo:"Circuitos b√°sicos e interruptores",
        badge:"S3 ‚Ä¢ Control",
        iniciativa:"Abrir y cerrar el camino de la electricidad creando nuestros propios interruptores.",
        objetivo:[
          "Construir un interruptor casero por contacto que funcione 10√ó seguidas.",
          "Integrarlo en un circuito LED‚Äìbater√≠a.",
          "Explicar 'circuito abierto' vs 'circuito cerrado' con ejemplos.",
          "Registrar pruebas (activaciones/fallos).",
          "Valorar ahorro y seguridad."
        ],
        materiales:[
          "LED, bater√≠a, caimanes.",
          "Clips, cart√≥n r√≠gido, encuadernadores (docente).",
          "Cinta aislante, stickers ON/OFF.",
          "Opcional: microinterruptores comerciales."
        ],
        paso:[
          {titulo:"Activaci√≥n (5')", items:["Ver interruptor del aula; imaginar el interior."]},
          {titulo:"Desaf√≠o (5')", items:["Interruptor casero confiable (10 activaciones)."]},
          {titulo:"Construcci√≥n (25')", items:["Mecanismo por presi√≥n (8'), integrar (10'), carcasa segura (7')."]},
          {titulo:"Medici√≥n (5')", items:["Tabla de 10 usos (‚úî/‚úñ) y ajustes."]},
          {titulo:"Cierre (5')", items:["Demostraciones de ON/OFF con explicaci√≥n del punto de contacto."]}
        ],
        preguntas:[
          "¬øQu√© separa o une los contactos?",
          "¬øC√≥mo evitar falsos contactos?",
          "¬øQu√© dispositivos controlas a diario?",
          "¬øC√≥mo contribuyen al ahorro?"
        ],
        respuestas:[
          "Separar = abierto; unir = cerrado.",
          "Topes y fijaci√≥n firme en cart√≥n.",
          "Interruptores en casa/auto/juguetes." 
        ],
        incentivar:["Reto de resistencia", "Premio a la soluci√≥n m√°s ingeniosa"],
        exposicion:["Demostrar ON/OFF y explicar una mejora"],
        felicitacion:"¬°Impecable control! Piocha del Interruptor ‚ö°üîò.",
        foco:["Vocabulario abierto/cerrado; ergonom√≠a; comparaci√≥n con uno comercial"],
        apoyos:["Plantillas con agujeros; clips grandes; parejas; gu√≠a fotogr√°fica"],
        evaluacion:["Funciona 10√ó", "Describe abierto/cerrado con dibujo"],
        seguridad:["Chinches solo docente; no forzar perforaciones; cables sin tensi√≥n"],
        errores:["Contacto flojo ‚Üí parpadeo; LED invertido ‚Üí revisar polaridad"],
        vocabulario:["Circuito abierto", "Circuito cerrado", "Contacto", "Interruptor"],
        diferenciacion:["6‚Äì8: pre-montado + decoraci√≥n", "9‚Äì12: dise√±o propio", "13‚Äì14: conmutaci√≥n de dos v√≠as (noci√≥n)"],
        extensiones:["Vida √∫til: cu√°ntas activaciones soporta", "Materiales de contacto: moneda vs clip"],
        logistica:["Mesa de test con fuente fija; checklist antes de mostrar"],
        mensaje:"Control el√©ctrico = seguridad + ahorro.",
        ceremonia:"Piocha del Interruptor ‚ö°üîò"
      },

      // =============== S4 ===============
      {
        id:4,
        titulo:"Bichos el√©ctricos vivientes",
        subtitulo:"Motores, vibraci√≥n y movimiento",
        badge:"S4 ‚Ä¢ Motores",
        iniciativa:"Robots sencillos que se mueven por vibraci√≥n y c√≥mo ajustar su comportamiento.",
        objetivo:[
          "Conectar motor vibratorio y observar conversi√≥n el√©ctrica‚Üímec√°nica.",
          "Construir bicho que se desplace ‚â•20 cm.",
          "Ajustar peso/fricci√≥n/altura para modificar trayectoria.",
          "Registrar cambios y resultados."
        ],
        materiales:[
          "Motor vibratorio, portapilas 2√óAA + bater√≠as.",
          "Vaso pl√°stico, plumones (patas), pompones, ojos, EVA, cinta, pegamento.",
          "Caimanes, pesas peque√±as (clips)."
        ],
        paso:[
          {titulo:"Activaci√≥n (5')", items:["Ver motor vibrando; ¬ød√≥nde usamos motores a diario?"]},
          {titulo:"Desaf√≠o (5')", items:["Moverse 20 cm sin caer."]},
          {titulo:"Construcci√≥n (25')", items:["Montar motor (5'), armar cuerpo (10'), optimizar (10')."]},
          {titulo:"Medici√≥n (5')", items:["Tabla: variable ‚Üí efecto (r√°pido, lento, circular)."]},
          {titulo:"Cierre (5')", items:["Carrera y reflexi√≥n de ajustes."]}
        ],
        preguntas:["¬øPor qu√© vibra?", "¬øC√≥mo afecta la fricci√≥n?", "¬øQu√© pasa si subes el centro de masa?"],
        respuestas:["Peso descentrado en eje ‚Üí vibraci√≥n.", "M√°s fricci√≥n ayuda a avanzar pero reduce velocidad.", "Centro alto ‚Üí inestabilidad (ca√≠das)."],
        incentivar:["Trayectorias creativas", "Video corto para portafolio"],
        exposicion:["Mostrar movimiento y explicar un ajuste"],
        felicitacion:"¬°Vida el√©ctrica lograda! Piocha del Motor ‚ö°üîÑ.",
        foco:["Variables de dise√±o; ejemplos cotidianos (vibraci√≥n en m√≥viles)"],
        apoyos:["Base pre-armada; ayuda en pegado; objetivo alterno: vibrar sin moverse"],
        evaluacion:["Recorre 20 cm o justifica ajustes", "Nombra 2 variables y su efecto"],
        seguridad:["Evitar cabler√≠o suelto; no trabajar al borde"],
        errores:["Motor mal fijado ‚Üí vibraci√≥n pobre; peso mal distribuido ‚Üí vuelcos"],
        vocabulario:["Motor DC", "Vibraci√≥n", "Fricci√≥n", "Centro de masa"],
        diferenciacion:["6‚Äì8: plantilla de cuerpo", "9‚Äì12: 2 materiales de patas", "13‚Äì14: tiempos/distancias y gr√°fica"],
        extensiones:["Pista con obst√°culos", "Comparar 1√óAA vs 2√óAA"],
        logistica:["Cinta de meta; zonas acolchadas"],
        mensaje:"La electricidad puede transformarse en movimiento √∫til y divertido.",
        ceremonia:"Piocha del Motor ‚ö°üîÑ"
      },

      // =============== S5 ===============
      {
        id:5,
        titulo:"Tarjetas musicales m√°gicas",
        subtitulo:"Electricidad que produce sonido (buzzer)",
        badge:"S5 ‚Ä¢ Sonido",
        iniciativa:"Arte + tecnolog√≠a: tarjeta que suena e ilumina al abrirse.",
        objetivo:[
          "Probar buzzer piezoel√©ctrico y LED.",
          "Construir interruptor por apertura (‚âà90¬∞).",
          "Integrar est√©tica y funci√≥n en la tarjeta.",
          "Explicar de forma cualitativa c√≥mo la vibraci√≥n produce sonido."
        ],
        materiales:["Buzzer piezo, LED, portapilas 3V, cinta de cobre, cartulina, foam delgado, decoraciones"],
        paso:[
          {titulo:"Activaci√≥n (5')", items:["Escuchar buzzer; identificar polaridad si aplica"]},
          {titulo:"Desaf√≠o (5')", items:["Tarjeta que se active al abrir 90¬∞ (luz + sonido)"]},
          {titulo:"Construcci√≥n (25')", items:["Probar componentes (5'), contacto por apertura (10'), integrar y decorar (10')"]},
          {titulo:"Medici√≥n (5')", items:["Ajustar presi√≥n para evitar activaci√≥n accidental"]},
          {titulo:"Cierre (5')", items:["Concierto de tarjetas y lectura del mensaje"]}
        ],
        preguntas:["¬øQu√© vibra para producir sonido?", "¬øC√≥mo evitar que suene al estar cerrada?"],
        respuestas:["Un disco vibra r√°pidamente al recibir energ√≠a: ondas sonoras.", "Separadores (foam) y buen dise√±o de contacto."],
        incentivar:["Concierto/exhibici√≥n", "Elecci√≥n libre del color LED"],
        exposicion:["Activar tarjeta, leer mensaje, explicar el mecanismo"],
        felicitacion:"¬°Arte + tecnolog√≠a! Piocha Musical ‚ö°üéµ.",
        foco:["Proyecto multisensorial; relaci√≥n con timbres/alarma"],
        apoyos:["Plantilla pre-cortada; opci√≥n de interruptor manual"],
        evaluacion:["Se activa al abrir", "Explica el contacto"],
        seguridad:["Bordes de cinta de cobre; evitar puntas met√°licas expuestas"],
        errores:["Contacto permanente ‚Üí suena siempre; poco contacto ‚Üí no suena"],
        vocabulario:["Piezoelectricidad (noci√≥n)", "Frecuencia", "Interruptor"],
        diferenciacion:["6‚Äì8: esquema con dibujos", "9‚Äì12: diagrama con s√≠mbolos", "13‚Äì14: comparar tonos"],
        extensiones:["Tarjeta tem√°tica (efem√©rides)", "Mini alarma"] ,
        logistica:["Evitar glitter suelto en √°rea de contactos; secado r√°pido"],
        mensaje:"Dise√±ar es comunicar: luz y sonido como lenguaje.",
        ceremonia:"Piocha Musical ‚ö°üéµ"
      },

      // =============== S6 ===============
      {
        id:6,
        titulo:"L√°mparas de dise√±ador",
        subtitulo:"Difusi√≥n de luz y dise√±o funcional",
        badge:"S6 ‚Ä¢ Luz",
        iniciativa:"C√≥mo los materiales moldean la luz para crear l√°mparas agradables y estables.",
        objetivo:[
          "Comparar LED directo vs con difusor.",
          "Construir l√°mpara estable que ilumine ‚â•15 cm.",
          "Seleccionar un difusor por confort visual y est√©tica.",
          "Justificar la elecci√≥n por escrito."
        ],
        materiales:["LEDs, portapilas 3V, interruptor, vasos transl√∫cidos/papel pergamino, algod√≥n/tissue/filtros, base MDF, adhesivos, decoraciones"],
        paso:[
          {titulo:"Activaci√≥n (5')", items:["Comparaci√≥n lado a lado: LED desnudo vs difusores"]},
          {titulo:"Desaf√≠o (5')", items:["Difundir luz suavemente y asegurar estabilidad"]},
          {titulo:"Construcci√≥n (25')", items:["Probar 3 difusores (8'), base/cuerpo (10'), ajustes est√©ticos (7')"]},
          {titulo:"Medici√≥n (5')", items:["Comprobar √°rea iluminada (plantilla/regla)"]},
          {titulo:"Cierre (5')", items:["Galer√≠a encendida y justificaci√≥n"]}
        ],
        preguntas:["¬øQu√© hace amable a la luz?", "¬øC√≥mo aseguras estabilidad?"],
        respuestas:["Transl√∫cidos dispersan luz; evitan deslumbramiento.", "Base amplia y centro de masa bajo."],
        incentivar:["Foto de producto", "Premio al mejor equilibrio funci√≥n/est√©tica"],
        exposicion:["Encender, mostrar difusor, justificar elecci√≥n"],
        felicitacion:"¬°Dise√±o profesional! Piocha del Dise√±ador ‚ö°üí°.",
        foco:["Funci√≥n + belleza; eficiencia (solo LEDs necesarios)"] ,
        apoyos:["Base pre-perforada; difusores pre-cortados"],
        evaluacion:["Estable", "Difusi√≥n adecuada", "Justifica elecci√≥n"],
        seguridad:["No exceder 3V; cables bien fijados"],
        errores:["Difusor muy opaco ‚Üí poca luz; base peque√±a ‚Üí ca√≠da"],
        vocabulario:["Difusi√≥n", "Transl√∫cido", "Confort visual"],
        diferenciacion:["6‚Äì8: dos difusores preseleccionados", "9‚Äì12: tabla pros/contras", "13‚Äì14: mini ensayo de dise√±o"],
        extensiones:["Fotograf√≠a de producto", "Marca/etiqueta de l√°mpara"],
        logistica:["Zona oscura para test; plantillas de 15 cm"],
        mensaje:"Los materiales transforman la luz: dise√±ar es decidir con prop√≥sito.",
        ceremonia:"Piocha del Dise√±ador ‚ö°üí°"
      },

      // =============== S7 ===============
      {
        id:7,
        titulo:"Electricistas de casa",
        subtitulo:"Circuitos dom√©sticos y seguridad",
        badge:"S7 ‚Ä¢ Vivienda",
        iniciativa:"Simularemos una habitaci√≥n con su cableado b√°sico, pensando como electricistas.",
        objetivo:[
          "Mapear una habitaci√≥n (luz + enchufe simulado).",
          "Implementar ‚â•2 circuitos independientes.",
          "Justificar ubicaci√≥n de interruptores/enchufes.",
          "Comprender nociones de seguridad (protecciones generales)."
        ],
        materiales:["Foamboard/cart√≥n, LEDs, interruptores, portapilas m√∫ltiples, cables de colores, cinta, muebles mini, papel decorativo"],
        paso:[
          {titulo:"Activaci√≥n (5')", items:["Plano simple y discusi√≥n de distribuci√≥n"]},
          {titulo:"Desaf√≠o (5')", items:["Diorama con 2 circuitos independientes (luz + enchufe)"]},
          {titulo:"Construcci√≥n (25')", items:["Mapa (8'), instalaci√≥n (12'), ambientaci√≥n/pruebas (5')"]},
          {titulo:"Medici√≥n (5')", items:["Diagrama final a color"]},
          {titulo:"Cierre (5')", items:["Tour de habitaciones y feedback"]}
        ],
        preguntas:["¬øQu√© pasar√≠a con un solo interruptor para todo?", "¬øD√≥nde conviene un enchufe extra?"],
        respuestas:["Dividir circuitos da comodidad/seguridad.", "Puntos cercanos a zonas de uso (escritorio, velador)."],
        incentivar:["Elegir tipo de habitaci√≥n", "Fotografiar proceso"],
        exposicion:["Demostrar independencia de circuitos; mostrar mapa el√©ctrico"],
        felicitacion:"¬°Nivel profesional! Piocha del Electricista ‚ö°üè†.",
        foco:["Planificaci√≥n previa; seguridad domiciliaria b√°sica"],
        apoyos:["Plantillas con ubicaciones; c√≥digo de colores obligatorio"],
        evaluacion:["2 circuitos independientes", "Ubicaci√≥n justificada", "Diagrama claro"],
        seguridad:["Nunca usar red real; maquetas con pilas", "Cables ordenados y fijados"],
        errores:["Mezclar retornos/idas ‚Üí no responde", "Falta de interruptor en acceso"],
        vocabulario:["Circuito independiente", "Fusible/interruptor general (noci√≥n)"],
        diferenciacion:["6‚Äì8: plantilla base", "9‚Äì12: distribuci√≥n elegida y justificada", "13‚Äì14: doble control (conceptual)"],
        extensiones:["Cocina/ba√±o (zonas protegidas)", "Reducir alargadores con buen dise√±o"],
        logistica:["Rotular cables por color; fotos antes de cerrar paredes"],
        mensaje:"El buen dise√±o el√©ctrico es invisible pero esencial.",
        ceremonia:"Piocha del Electricista ‚ö°üè†"
      },

      // =============== S8 ===============
      {
        id:8,
        titulo:"Maestros de conexiones",
        subtitulo:"Serie vs paralelo",
        badge:"S8 ‚Ä¢ Conexiones",
        iniciativa:"Compararemos dos modos de conexi√≥n y cu√°ndo conviene cada uno.",
        objetivo:[
          "Construir serie y paralelo (3 LEDs cada uno).",
          "Observar brillo e independencia al desconectar un LED.",
          "Concluir por qu√© el hogar usa paralelo.",
          "Registrar tabla comparativa y presentarla."
        ],
        materiales:["6 LEDs mismo color, 2 portapilas, cables, interruptores, base marcada, etiquetas, mult√≠metro (9+)"],
        paso:[
          {titulo:"Activaci√≥n (5')", items:["Luces navide√±as antiguas (serie) vs modernas (paralelo)"]},
          {titulo:"Desaf√≠o (5')", items:["Construir y comparar ambos circuitos"]},
          {titulo:"Construcci√≥n (25')", items:["Serie (8'), Paralelo (8'), pruebas (9')"]},
          {titulo:"Medici√≥n (5')", items:["Tabla: brillo, independencia, consumo percibido"]},
          {titulo:"Cierre (5')", items:["Conclusiones en mini-plenario"]}
        ],
        preguntas:["¬øQu√© pasa al sacar un LED en serie? ¬øy en paralelo?", "¬øQu√© cambia en el brillo?"],
        respuestas:["Serie: un solo camino; al cortar uno, se apagan todos.", "Paralelo: ramas independientes; cada LED recibe alimentaci√≥n propia."],
        incentivar:["Laboratorio libre; hip√≥tesis antes de probar"],
        exposicion:["Mostrar ambos, desconectar uno y explicar diferencias"],
        felicitacion:"¬°Pensamiento sist√©mico! Piocha del Circuito ‚ö°üîó.",
        foco:["Elegir topolog√≠a seg√∫n necesidad: simple vs confiable"],
        apoyos:["C√≥digo de colores (rojo=serie/azul=paralelo); diagramas gu√≠a"],
        evaluacion:["Ambos operativos", "Explica 1 ventaja del paralelo"],
        seguridad:["No cruzar cables; orden visual"],
        errores:["Nodos mal conectados en paralelo ‚Üí efecto serie"],
        vocabulario:["Serie", "Paralelo", "Rama", "Nodo"],
        diferenciacion:["6‚Äì8: plantilla de puntos", "9‚Äì12: lectura de s√≠mbolos", "13‚Äì14: medir V/I (opcional)"],
        extensiones:["Mini luces navide√±as", "Maqueta con dos ambientes"],
        logistica:["Zonas separadas en la base; etiquetas visibles"],
        mensaje:"C√≥mo conectamos importa tanto como qu√© conectamos.",
        ceremonia:"Piocha del Circuito ‚ö°üîó"
      },

      // =============== S9 ===============
      {
        id:9,
        titulo:"Generadores de energ√≠a",
        subtitulo:"Crear electricidad con movimiento",
        badge:"S9 ‚Ä¢ Energ√≠a",
        iniciativa:"Usaremos un motor como dinamo para generar electricidad y encender una mini ciudad.",
        objetivo:[
          "Montar un generador manual (motor DC + manivela) y obtener voltaje.",
          "Encender ‚â•2 LEDs durante 10 s de giro suave.",
          "Relacionar velocidad de giro con brillo.",
          "Conectar con energ√≠as renovables (viento/agua) de forma conceptual."
        ],
        materiales:["Motor DC, manivela/rueda, 2‚Äì4 LEDs, base de ciudad, cables, mult√≠metro (op.), decoraciones"],
        paso:[
          {titulo:"Activaci√≥n (5')", items:["Demostraci√≥n: girar ‚Üí encender LED"]},
          {titulo:"Desaf√≠o (5')", items:["Iluminar 2 LEDs por 10 s con giro constante"]},
          {titulo:"Construcci√≥n (25')", items:["Armar generador (10'), mini ciudad (8'), optimizar (7')"]},
          {titulo:"Medici√≥n (5')", items:["Observar voltaje/brillo vs velocidad (si hay mult√≠metro)"]},
          {titulo:"Cierre (5')", items:["Expo de ciudades energ√©ticas"]}
        ],
        preguntas:["¬øQu√© se mueve dentro del motor para generar electricidad?", "¬øQu√© fuentes mueven turbinas reales?", "¬øQu√© pasa al girar m√°s r√°pido?"],
        respuestas:["Imanes y bobinas: el movimiento relativo induce corriente.", "Agua (hidro), viento (e√≥lico), vapor (termo).", "M√°s velocidad ‚Üí m√°s energ√≠a (m√°s brillo)."],
        incentivar:["Competencia 'ciudad m√°s brillante'", "Carteles con nombre de la ciudad"],
        exposicion:["Demostraci√≥n del generador, explicar conversi√≥n mec√°nica‚Üíel√©ctrica, mostrar efecto de la velocidad"],
        felicitacion:"¬°Generaci√≥n lograda! Piocha del Generador ‚ö°‚öôÔ∏è.",
        foco:["Transformaci√≥n de energ√≠a y sostenibilidad"],
        apoyos:["Generador base pre-armado; plantillas de edificios; ayuda al giro"],
        evaluacion:["Enciende 2 LEDs por 10 s", "Explica velocidad‚Äìbrillo"],
        seguridad:["Sujetar bien la base; no forzar ejes del motor; cuidado con piezas peque√±as"],
        errores:["Conexi√≥n suelta ‚Üí parpadeo; giro irregular ‚Üí ca√≠da de brillo"],
        vocabulario:["Dinamo", "Turbina", "Energ√≠a mec√°nica/el√©ctrica"],
        diferenciacion:["6‚Äì8: manivela grande y estable", "9‚Äì12: medir con mult√≠metro", "13‚Äì14: rectificaci√≥n simple (noci√≥n)"],
        extensiones:["Molino de viento de papel", "Rueda hidr√°ulica mini"],
        logistica:["Pistas de prueba; fijar generadores a la mesa con cinta"],
        mensaje:"La electricidad se genera: podemos usar movimiento y fuentes renovables.",
        ceremonia:"Piocha del Generador ‚ö°‚öôÔ∏è"
      },

      // =============== S10 ===============
      {
        id:10,
        titulo:"Feria STEAM final",
        subtitulo:"Mejora, presentaci√≥n y celebraci√≥n",
        badge:"S10 ‚Ä¢ Cierre",
        iniciativa:"Culminaremos mejorando un proyecto y present√°ndolo como ingenieros.",
        objetivo:[
          "Elegir un proyecto previo y planificar mejoras t√©cnicas/est√©ticas.",
          "Preparar un pitch de 2 minutos con estructura clara.",
          "Exponer frente a audiencia y recibir retroalimentaci√≥n.",
          "Celebrar logros con entrega de diplomas."
        ],
        materiales:["Materiales previos, cartulinas para p√≥ster, marcadores, stickers premium, certificados"],
        paso:[
          {titulo:"Activaci√≥n (5')", items:["Revisar proyectos y elegir favorito"]},
          {titulo:"Desaf√≠o (5')", items:["Mejorar el proyecto y preparar pitch (Problema ‚Üí Dise√±o ‚Üí Aprendizaje ‚Üí Mejora)"]},
          {titulo:"Construcci√≥n (25')", items:["Implementar mejora (15'), crear p√≥ster y practicar (10')"]},
          {titulo:"Medici√≥n (5')", items:["Checklist del pitch (5 puntos)"]},
          {titulo:"Cierre (5')", items:["Feria con familias y entrega de diplomas"]}
        ],
        preguntas:["¬øQu√© problema resuelve?", "¬øQu√© aprendiste de electricidad?", "¬øC√≥mo lo mejorar√≠as?"],
        respuestas:["Narrativa guiada con evidencias: dise√±o, dificultad superada, aprendizaje, proyecci√≥n"],
        incentivar:["Ambiente de feria profesional; roles de 'inversores'"],
        exposicion:["Pitch 2 min: 1) Problema 2) Dise√±o 3) Dificultad 4) Aprendizaje 5) Mejora"],
        felicitacion:"¬°Graduaci√≥n! Diploma y Piocha Maestra ‚ö°üèÜ.",
        foco:["S√≠ntesis de conceptos 1‚Äì9; aplicaci√≥n cotidiana"],
        apoyos:["Formatos alternativos; acompa√±amiento emocional; expectativas flexibles"],
        evaluacion:["Mejora implementada", "Pitch claro", "Conecta con aprendizajes"],
        seguridad:["Orden en el aula; tr√°nsito seguro de familias; cuidado de piezas peque√±as"],
        errores:["Leer sin contacto visual; exceder tiempo ‚Üí practicar con timer"],
        vocabulario:["Prototipo", "Iteraci√≥n", "Pitch", "Evidencia"],
        diferenciacion:["6‚Äì8: demostraci√≥n pr√°ctica con ayuda", "9‚Äì12: p√≥ster con 3 vi√±etas", "13‚Äì14: rol de anfitri√≥n de stand"],
        extensiones:["Galer√≠a digital (fotos/videos)", "Encuesta breve a familias"],
        logistica:["Asignar stands, flujo de p√∫blico, m√∫sica suave de fondo"],
        mensaje:"La ingenier√≠a es crear, mejorar y comunicar.",
        ceremonia:"Diploma y Piocha Maestra ‚ö°üèÜ"
      }
    ];

    // =============================
    // RENDER DEL MEN√ö
    // =============================
    const cards = document.getElementById('cards');
    sesiones.forEach(s => {
      const el = document.createElement('div');
      el.className = 'card';
      el.innerHTML = `
        <span class="badge">${s.badge}</span>
        <h3>Clase ${String(s.id).padStart(2,'0')}: ${s.titulo}</h3>
        <p>${s.subtitulo}</p>
        <button aria-label="Abrir gu√≠a de la Clase ${s.id}">Abrir gu√≠a</button>
      `;
      el.querySelector('button').addEventListener('click', (e) => openPanel(s, e.currentTarget));
      cards.appendChild(el);
    });

    // =============================
    // PANEL CON PESTA√ëAS
    // =============================
    const overlay = document.getElementById('overlay');
    const panel = document.getElementById('panel');
    const panelTitle = document.getElementById('panelTitle');
    const tabs = document.getElementById('tabs');
    const tabContent = document.getElementById('tabContent');
    const closeBtn = document.getElementById('closeBtn');
    const printBtn = document.getElementById('printBtn');

// Orden de pesta√±as
const TAB_ORDER = [
  {key:'resumen', label:'Resumen'},
  {key:'objetivo', label:'Objetivos'},
  {key:'materiales', label:'Materiales'},
  {key:'paso', label:'Paso a paso'},
  {key:'preguntas', label:'Preguntas clave'},
  {key:'respuestas', label:'Respuestas gu√≠a'},
  {key:'foco', label:'Enfoques clave'},
  {key:'seguridad', label:'Seguridad'},
  {key:'errores', label:'Errores comunes'},
  {key:'vocabulario', label:'Vocabulario'},
  {key:'apoyos', label:'Ayudas/NEE'},
  {key:'diferenciacion', label:'Diferenciaci√≥n'},
  {key:'evaluacion', label:'Evaluaci√≥n'},
  {key:'exposicion', label:'Exposici√≥n'},
  {key:'incentivar', label:'Motivaci√≥n'},
  {key:'extensiones', label:'Extensiones'},
  {key:'logistica', label:'Log√≠stica'},
  {key:'mensaje', label:'Mensaje final'},
  {key:'ceremonia', label:'Ceremonia'}
];

let current = null;
let triggerBtn = null;

function openPanel(s, trigger){
  current = s;
  triggerBtn = trigger || null;
  document.body.classList.add('modal-open');
  overlay.classList.add('show');
  panel.classList.add('open');
  overlay.setAttribute('aria-hidden','false');
  panelTitle.textContent = `Clase ${String(s.id).padStart(2,'0')}: ${s.titulo}`;
  renderTabs(s);
  renderTab(s, 'resumen');
  setTimeout(()=>{ panel.querySelector('.tab-btn')?.focus(); }, 50);
}

function closePanel(){
  overlay.classList.remove('show');
  panel.classList.remove('open');
  overlay.setAttribute('aria-hidden','true');
  document.body.classList.remove('modal-open');
  if(triggerBtn){
    triggerBtn.focus();
    triggerBtn = null;
  }
}

function renderTabs(s){
  tabs.innerHTML = '';
  TAB_ORDER.forEach((t,i)=>{
    const btn = document.createElement('button');
    btn.className = 'tab-btn' + (i===0 ? ' active' : '');
    btn.textContent = t.label;
    btn.setAttribute('data-key', t.key);
    btn.addEventListener('click', ()=>{
      tabs.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      renderTab(s, t.key);
    });
    tabs.appendChild(btn);
  });
}

function renderList(items){
  if(!items || !items.length) return '<p class="tip">‚Äî</p>';
  return `<ul>${items.map(i=>`<li>${escapeHTML(i)}</li>`).join('')}</ul>`;
}

function sectionHTML(title, html){
  return `<section><h4>${title}</h4>${html}</section>`;
}

function renderTab(s, key){
  const blocks = [];
  if(key==='resumen'){
    blocks.push(sectionHTML('Iniciativa / Presentaci√≥n', `<p>${escapeHTML(s.iniciativa || '')}</p>`));
    blocks.push(sectionHTML('Subt√≠tulo', `<div class="pill">${escapeHTML(s.subtitulo || '')}</div>`));
    blocks.push(sectionHTML('Estructura de la sesi√≥n (tiempos)', `
      <div class="kpi">
        <div class="pill">Activaci√≥n 5‚Ä≤</div>
        <div class="pill">Desaf√≠o 5‚Ä≤</div>
        <div class="pill">Construcci√≥n 25‚Ä≤</div>
        <div class="pill">Medici√≥n 5‚Ä≤</div>
        <div class="pill">Cierre 5‚Ä≤</div>
      </div>`));
  }
  if(key==='objetivo') blocks.push(sectionHTML('Objetivos de aprendizaje', renderList(s.objetivo)));
  if(key==='materiales') blocks.push(sectionHTML('Materiales por estudiante/equipo', renderList(s.materiales)));
  if(key==='paso'){
    const html = (s.paso||[]).map(p=>`<div style="margin:10px 0"> <strong>${escapeHTML(p.titulo)}</strong>${renderList(p.items)}</div>`).join('');
    blocks.push(sectionHTML('Secuencia did√°ctica detallada', html || '<p class="tip">‚Äî</p>'));
  }
  if(key==='preguntas') blocks.push(sectionHTML('Preguntas para activar pensamiento', renderList(s.preguntas)));
  if(key==='respuestas') blocks.push(sectionHTML('Respuestas / ideas gu√≠a (docente)', renderList(s.respuestas)));
  if(key==='foco') blocks.push(sectionHTML('Conceptos y enfoques clave', renderList(s.foco)));
  if(key==='seguridad') blocks.push(sectionHTML('Protocolos de seguridad', renderList(s.seguridad)));
  if(key==='errores') blocks.push(sectionHTML('Errores frecuentes y soluci√≥n', renderList(s.errores)));
  if(key==='vocabulario') blocks.push(sectionHTML('Vocabulario esencial', renderList(s.vocabulario)));
  if(key==='apoyos') blocks.push(sectionHTML('Ayudas / NEE / accesibilidad', renderList(s.apoyos)));
  if(key==='diferenciacion') blocks.push(sectionHTML('Diferenciaci√≥n por edades', renderList(s.diferenciacion)));
  if(key==='evaluacion') blocks.push(sectionHTML('Evaluaci√≥n formativa (evidencias / r√∫brica)', renderList(s.evaluacion)));
  if(key==='exposicion') blocks.push(sectionHTML('C√≥mo exponer el proyecto', renderList(s.exposicion)));
  if(key==='incentivar') blocks.push(sectionHTML('Estrategias de motivaci√≥n', renderList(s.incentivar)));
  if(key==='extensiones') blocks.push(sectionHTML('Extensiones / tareas opcionales', renderList(s.extensiones)));
  if(key==='logistica') blocks.push(sectionHTML('Log√≠stica y preparaci√≥n', renderList(s.logistica)));
  if(key==='mensaje') blocks.push(sectionHTML('Mensaje que queda / aprendizaje', `<p>${escapeHTML(s.mensaje || '')}</p>`));
  if(key==='ceremonia') blocks.push(sectionHTML('Cierre ceremonial', `<p>${escapeHTML(s.ceremonia || '')}</p>`));
  tabContent.innerHTML = blocks.join('');
}

function escapeHTML(str){
  return String(str)
    .replaceAll('&','&amp;')
    .replaceAll('<','&lt;')
    .replaceAll('>','&gt;')
    .replaceAll('"','&quot;')
    .replaceAll("'",'&#039;');
}

// Eventos globales
closeBtn.addEventListener('click', closePanel);
overlay.addEventListener('click', closePanel);
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closePanel(); });

// Imprimir solo el panel
printBtn.addEventListener('click', ()=>{
  const main = document.querySelector('main');
  main.style.display = 'none';
  window.print();
  setTimeout(()=>{ main.style.display = ''; }, 250);
});


</script>
</body>
</html>
